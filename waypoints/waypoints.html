<div id="waypoints">
	<div class="container">
		<div class="form-horizontal">
			<div class="form-group">
				<label for="navplan_name" class="control-label col-sm-3">Navplan Name</label>
				<div class="col-sm-6">
					<div class="input-group">
						<input id="navplan_name" type="text" class="form-control" placeholder="Enter Name" ng-model="globalData.navplan.title" />
						<span class="input-group-btn">
							<button type="button" class="btn btn-primary" title="Save Navplan" ng-click="saveNavplan();" ng-disabled="!globalData.navplan.title"><i class="glyphicon glyphicon-save"></i></button>
						</span>					
					</div>
				</div>	
			</div>	
			<div class="form-group">
				<label for="navplan_list" class="control-label col-sm-3">Saved Plans</label>
				<div class="col-sm-6">
					<div class="input-group">
						<select id="navplan_list" class="form-control" ng-model="selectedNavplanId">
							<option value="" selected>--- Select ---</option>
							<option ng-repeat="navplan in globalData.user.navplanList" value="{{ navplan.id }}">{{ navplan.title }}</option>
						</select>
						<span class="input-group-btn">
							<button type="button" class="btn btn-success" title="Load Navplan" ng-click="loadNavplan();" ng-disabled="!selectedNavplanId"><i class="glyphicon glyphicon-open"></i></button>
							<button type="button" class="btn btn-danger" title="Delete Navplan" ng-click="deleteNavplan();" ng-disabled="!selectedNavplanId"><i class="glyphicon glyphicon-trash"></i></button>
						</span>					
					</div>
				</div>
			</div>	
			<div class="form-group">
				<label for="aircraft_speed" class="control-label col-sm-3">Ground Speed</label>
				<div class="col-sm-2">
					<input type="text" id="aircraft_speed" class="form-control" ng-model="globalData.aircraft.speed" placeholder="kt" maxlength="3" size="3">
				</div>
			</div>
			<div class="form-group">
				<label for="aircraft_consumption" class="control-label col-sm-3">Fuel Consumption</label>
				<div class="col-sm-2">
					<input type="text" id="aircraft_consumption" class="form-control" ng-model="globalData.aircraft.consumption" placeholder="l/h" maxlength="2" size="2">
				</div>
			</div>
		</div>
		<div class="table-responsive">
			<table class="table table-condensed table-striped table-hover">
				<thead>
					<tr>
						<th>Freq</th>
						<th>Callsign</th>
						<th>Checkpoint</th>
						<th>Alt</th>
						<th>MT</th>
						<th>Dist</th>
						<th>EET</th>
						<th>Remarks</th>
						<th>&nbsp;</th>
					</tr>
				</thead>
				<tbody>
					<!-- trip checkpoints -->
					<tr ng-repeat="wp in globalData.navplan.waypoints | filter: { isAlternate: false } as results" ng-class="{info: wp.isStartEnd}">
						<td>{{ wp.freq }}</td>
						<td>{{ wp.callsign }}</td>
						<td>{{ wp.checkpoint }}</td>
						<td>{{ wp.alt }}</td>
						<td>{{ wp.mtText }}</td>
						<td>{{ wp.distText }}</td>
						<td>{{ wp.eetText }}</td>
						<td>{{ wp.remark }}</td>
						<td>
							<button type="button" class="btn btn-warning btn-circle" ng-click="editWaypoint(wp);"><i class="glyphicon glyphicon-edit"></i></button>
							<button type="button" class="btn btn-danger btn-circle" ng-click="removeWaypoint(wp);"><i class="glyphicon glyphicon-remove"></i></button>
						</td>
					</tr>
					<!-- trip total -->
					<tr ng-if="results.length > 0">
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>{{ globalData.fuel.tripTime }}</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
					<!-- alternate checkpoint -->
					<tr ng-if="globalData.fuel.alternateTime > 0">
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td><i><u>Alternate:</u></i></td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
					<tr ng-repeat="wp in globalData.navplan.waypoints | filter: { isAlternate: true } " ng-class="{danger: true}">
						<td>{{ wp.freq }}</td>
						<td>{{ wp.callsign }}</td>
						<td>{{ wp.checkpoint }}</td>
						<td>{{ wp.alt }}</td>
						<td>{{ wp.mtText }}</td>
						<td>{{ wp.distText }}</td>
						<td>{{ wp.eetText }}</td>
						<td>{{ wp.remark }}</td>
						<td>
							<button type="button" class="btn btn-warning btn-circle" ng-click="editWaypoint(wp);"><i class="glyphicon glyphicon-edit"></i></button>
							<button type="button" class="btn btn-danger btn-circle" ng-click="removeWaypoint(wp);"><i class="glyphicon glyphicon-remove"></i></button>
						</td>
					</tr>
					<!-- empty list -->
					<tr ng-if="results.length == 0">
						<td colspan="9"><i>Empty list. Select checkpoints on map.</i></td>
					</tr>
				</tbody>			
			</table>
		</div> 
		<div class="form-inline">
			<div class="form-group">
				<a id="dlPdfLink" href="php/navplanPdf.php" target="_blank" class="btn btn-primary btn-circle" title="Print Navplan as PDF" download="navplan.pdf" ng-click="createPdfNavplan()"><i class="glyphicon glyphicon-print"></i></a>&nbsp;
				<a id="dlExcelLink" href="php/navplanExcel.php" target="_blank" class="btn btn-success btn-circle" title="Export Navplan as Excel" download="navplan.xlsx" ng-click="createExcelNavplan()"><i class="glyphicon glyphicon-export"></i></a>
			</div>
		</div>
	</div>
</div>
